# [**Ввод-вывод и преобразование данных**](https://metanit.com/sharp/tutorial/2.15.php)

**Преобразования данных**.  
В некоторых ситуациях для использования данных требуется изменить их принадлежность к определенному типу. К примеру для
записи в переменную для дальнейших математических операций. Чаще всего преобразование используется для конвертации
строки **string** в другие типы. например для превращения **строки** `“45”` в **целочисленное** `45`. Всего есть 8
способов преобразования. Тут подробнее о 4:

## **Прямые**
### **Неявное**
Автоматическое преобразование компилятором одной переменной в другую. Работает только там, где типы данных полностью
совместимы. Например:

| Работает                                        | Не работает                                                      |
|:------------------------------------------------|:-----------------------------------------------------------------|
| int x \= 4; double y \= x  y имеет значение 4.0 | double x \= 4.0;  int y \= x; **Ошибка**. Возможна потеря данных |

### **Явное**
Преобразование: преобразование. Четкое обозначение типа переменной в формате: тип переменная \= (тип) *другая-*
переменная. Также вызывает ошибку при несовместимости типов, но поддерживает более широкий спектр преобразований.

```
double x \= 4.5;   
int y \= (int)x; // y \= 4 поддерживает преобразование дроби в целое число, но полностью отбрасывает дробную часть.
```

## **Методы**
### **Parse**
Метод преобразования string данных во что-то другое. Записывается как ```тип.Parse(“строка”)```. Выдает ошибку при любом
несоответствии типов и значении null. Используется приоритетно для обработки ввода пользователя.

### **TryParse**:
Вариация метода **Parse**, подразумевающая работу с несоответствиями. Записывается как
```тип.TryParse(“строка”, out тип переменная)```.

Работает в режиме **true/false**. При **true** *строка корректная и парсинг успешен*. При **false** *строка не может
быть конвертирована в тип переменной*. **Вместо ошибки** он будет выводить в переменную **значение по умолчанию** для
этой переменной. К примеру для int это 0. Но если ввод и был 0, не увидит разницу.

### **TryParse(if/else)**
Решает эту проблему. Позволяет обработать ошибку несоответствия и отличить **false** от **ввода пользователя**, если он
идентичен дефолтному значению переменной. Записывается как `if(тип.TryParse(“строка”, out тип переменная)){} else{}`

### **Convert**

Метод преобразования любых данных в любые соответствующим методом ```ToТип(значение)```. К примеру, метод
```ToString(17)``` преобразует int 17 в string “17”. Может обрабатывать более широкий спектр преобразований, чем Parse.
Основной функционал:

**Округление**: может по стандартным математическим принципам преобразовывать дроби в целые числа. При том как из
строчного типа, так и из дробного. Метод ```Convert.ToInt32(3.5)``` даст результат 4. При том он выдаст одинаковое
значение как при значении double 3.5, так и при string “3.5”.

**null**: Convert может работать со значениями null. Метод ```Convert.ToInt32(null)``` даст результат 0, а не ошибку.

**Логические значения**: Convert может обрабатывать логические значения. ```Convert.ToInt32("false")``` даст 0, а
``Convert.ToInt32("true")`` даст 1.

## **Ввод-Вывод**

### **Вывод**
Отображение строки в консоль. Если нужно вывести не строчную переменную или значение математической операции
автоматически применяет метод ```**ToString()**``` и конвертирует значение в строку.   
Для вывода используются два метода: ```**Console.Write()**``` и ```**Console.WriteLine()**```, Первый просто выводит
значение. Второй выводит и переносит строку на следующую.  
Также поддерживает 3 дополнительные функции (все можно сочетать одновременно):

**Плейсхолдеры**: позволяет записать вне кавычек переменную, а внутри кавычек плейсхолдер с номером в формате ```{0}```.
Плейсхолдер будет заменен на переменную согласно порядку слева направо. Пример: ```(“{0}” x)		// вывод x. ```     
**Интерполяция**: обозначается знаком **$** перед кавычками. Позволяет выводит переменные без плейсхолдеров, считывая их
из кода выше. Пример: ```($“Имя {x}”)	// вывод: Имя *значение*x  ```  
**Вербатим** строка: обозначается знаком **@** перед кавычками. Позволяет переносить строку без \\n и делать
многострочный вывод.

### **Ввод**
Представлен единственным методом **Console.ReadLine()**. Принимает только строчные значения и требует дополнительной
конвертации. Не поддерживает использование управляющих литералов.