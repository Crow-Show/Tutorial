# [**Преобразования данных**](https://metanit.com/sharp/tutorial/2.2.php)

В некоторых ситуациях для использования данных требуется изменить их принадлежность к определенному типу. К примеру для записи в переменную для дальнейших математических операций. Чаще всего преобразование используется для конвертации строки **string** в другие типы. например для превращения **строки** “45” в **целочисленное** 45. Всего есть 8 способов преобразования. Тут подробнее о 4:

### **Неявное** преобразование
Автоматическое преобразование компилятором одной переменной в другую. Работает только там, где типы данных полностью совместимы. Из маленького типа данных в большой и из меньшего беззнакового в больший знаковый.  Например:

| Работает | Не работает |
| :---- | :---- |
| int x \= 4; double y \= x  y имеет значение 4.0 | double x \= 4.0;  int y \= x; **Ошибка**. Возможна потеря данных |

### **Явное** преобразование
Преобразование. Четкое обозначение типа переменной в формате: тип переменная \= (тип) *другая-*переменная. Также вызывает ошибку при несовместимости типов, но поддерживает более широкий спектр преобразований.  
```
double x = 4.5;   
int y = (int)x; // y = 4 поддерживает преобразование дроби в целое число, но полностью отбрасывает дробную часть.
```
### **Parse**
Метод преобразования string данных во что-то другое. Записывается как **тип.Parse(“строка”)**. Выдает **ошибку** при любом несоответствии типов и значении **null**. Используется приоритетно для обработки ввода пользователя.  
### **TryParse**
Вариация метода **Parse**, подразумевающая работу с несоответствиями. Записывается как `тип.TryParse(“строка”, out тип переменная)`. Также подразумевает запись успешности в биллинговую переменную записью `bool переменная = запись TryParse` для повторно использования результата в `if/else`

Работает в режиме **true/false**. При **true** *строка корректная и парсинг успешен*. При **false** *строка не может быть конвертирована в тип переменной*. **Вместо ошибки** он будет выводить в переменную **значение по умолчанию** для этой переменной. К примеру для int это 0. Но если ввод и был 0, не увидит разницу.  
### **TryParse(if/else)**
Решает эту проблему. Позволяет обработать ошибку несоответствия и отличить **false** от **ввода пользователя**, если он идентичен дефолтному значению переменной. Записывается как `if(тип.TryParse(“строка”, out тип переменная)){} else{}`

### **Convert**
Метод преобразования любых данных в любые соответствующим методом `ToТип(значение)`. К примеру, метод `ToString(17)` преобразует **int** _17_ в **string** “_17_”. Может обрабатывать более широкий спектр преобразований, чем **Parse**. Основной функционал:  
**Округление**: Может по стандартным математическим принципам преобразовывать дроби в целые числа. При том как из строчного типа, так и из дробного. Метод `Convert.ToInt32(3.5)` даст результат _4_. При том он выдаст одинаковое значение как при значении **double** _3.5_, так и при **string** _“3.5”_.   
**null**: Convert может работать со значениями **null**. Метод `Convert.ToInt32(null)` даст результат 0, а не ошибку.  
**Логические значения**: Convert может обрабатывать логические значения. `Convert.ToInt32(false)` даст 0, а `Convert.ToInt32(true)` даст 1.

### **Метод**  
При использовании **методов** в реальный программах имеет смысл сделать **отдельный метод** для обработки ввода, вывода сообщения и парсинга. Пример:

    static uint ReadUInt(string message)			//обрабатывает string в нужный тип  
    {  
        Console.Write(message);				//выводит сообщение перед вводом  
        uint.TryParse(Console.ReadLine(), out uint value);	//парсит ввод  
        return value;						//возвращает значение  
    }  
